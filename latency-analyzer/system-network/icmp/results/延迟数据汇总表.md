# 网络延迟数据汇总表

## Dogfood环境对比

| 指标 | Hygon (海光) | AMD | Intel |
|------|-------------|-----|-------|
| **节点方向** | 10.0.19.95->10.0.19.96 | 10.1.18.76->10.1.18.75 | 10.255.0.100->10.255.0.107 |
| **总会话数** | 8,585 | 477 | 4,444 |
| **低延迟比例 (<10ms)** | 80.56% | 10.90% | 99.17% |
| **中位延迟** | 817.18µs | 608.25ms | 87.84µs |
| **平均延迟** | 719.29ms | 42.72s | 11.63s |
| **P95延迟** | 3.70s | 3.95s | 3.87ms |
| **P99延迟** | 16.00s | 2846.41s | 7.80ms |
| **最大延迟** | 51.32s | 2846.69s | 51630.82s |
| **主要处理阶段** | Path2_12->13 (35.95%) | INCOMING_Path1_5->6 (99.53%) | Path1_0->1 (56.76%) |
| **次要处理阶段** | INCOMING_Path1_5->6 (31.64%) | Path1_5->6 (0.47%) | Path1_5->6 (21.62%) |
| **处理路径特点** | 入站出站均衡 | 入站处理瓶颈 | 路径多样化 |
| **丢包会话** | 0 | 0 | 0 |
| **性能评级** | 良好 | 差 | 优秀 |

## Kunming环境重点节点对

| 节点对 | 方向 | 会话数 | 低延迟比例 | 中位延迟 | 平均延迟 | P95延迟 | 最大延迟 | 主要处理阶段 | 状态 |
|--------|------|--------|------------|----------|----------|---------|----------|-------------|------|
| **Node7->Node6** | 172.16.64.156->172.16.64.155 | 121 | 46.28% | 151.69ms | 34.27s | 496.33s | 699.11s | Path1_3->4 (86.15%) | 高负载 |
| **Node3->Node8** | 172.16.64.152->172.16.64.157 | 86 | 22.09% | 993.67ms | 33.50s | 2.998s | 1234.23s | Path1_3->4 (94.03%) | 延迟问题 |
| **Node8->Node3** | 172.16.64.157->172.16.64.152 | 72 | 100% | 33.36µs | 170.86µs | 80.28µs | 4.85ms | 无瓶颈 | 优秀 |
| **Node2->Node9** | 172.16.64.151->172.16.64.158 | 27 | 37.04% | 427.66ms | 14.28s | 42.84s | 329.15s | Path1_3->4 (88.24%) | 一般 |
| **Node5->Node4** | 172.16.64.154->172.16.64.153 | 7 | 0% | 585.40s | 719.38s | 1713.47s | 1713.47s | Path1_1->2 (100%) | 严重问题 |
| **Node9->Node2** | 172.16.64.158->172.16.64.151 | 2 | 0% | 550.80s | 550.80s | 1040.46s | 1040.46s | Path1_1->2 (100%) | 严重问题 |

## Kunming环境丢包情况

| 指标 | 数值 | 说明 |
|------|------|------|
| **总会话数** | 2,717 | 所有节点对总数 |
| **丢包会话数** | 2,394 | 无法正常处理的会话 |
| **丢包率** | 88.1% | 严重影响业务 |
| **主要丢包阶段** | Path2_9->12 (94.40%) | 关键瓶颈点 |
| **次要丢包阶段** | Path1_0->1 (2.59%) | 辅助问题点 |
| **丢包原因** | INCOMING_Stage_1_to_2_SKB_Mismatch (100%) | 协议层问题 |

## 处理阶段分析总结

### Dogfood环境处理阶段对比
- **Intel**: 路径分散化，Path1_0->1为主，入站处理占比较小
- **Hygon**: 双向均衡，出站入站处理并重
- **AMD**: 严重偏向入站处理，存在明显瓶颈

### Kunming环境处理阶段
- **正常会话**: 83.75%在Path1_3->4阶段处理
- **问题会话**: 94.40%丢包在Path2_9->12阶段

## 关键性能指标总结

### 最优性能
- **Intel环境**: 99.17%低延迟，中位延迟87.84µs，处理路径多样化
- **Node8->Node3**: 100%低延迟，中位延迟33.36µs，无处理瓶颈

### 性能问题
- **AMD环境**: 仅10.90%低延迟，P99延迟高达47分钟，99.53%会话集中入站处理
- **Kunming丢包**: 88.1%的会话丢包，严重影响通信，94.40%丢包在Path2_9->12

### 需要关注
- **Node5->Node4**: 延迟全部>60秒，100%会话在Path1_1->2处理
- **Node9->Node2**: 延迟全部>60秒，100%会话在Path1_1->2处理
- **Hygon环境**: 19.44%会话延迟>10ms，需优化入站出站均衡性

---

**备注**: 
- µs = 微秒, ms = 毫秒, s = 秒
- 低延迟定义为 <10ms
- P95/P99表示95%/99%分位数
- INCOMING/OUTGOING表示流量方向
- Path表示网络处理路径阶段 